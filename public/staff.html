<!DOCTYPE html>
<html>
<head>
<title>Staff Panel</title>
<style>
body { background:#0c0c0c; color:#00eaff; font-family: monospace; }
.container { width:90%; margin:auto; }
.block {
  background:rgba(255,255,255,0.06);
  padding:15px; margin:15px 0; border:1px solid #00eaff; border-radius:10px;
}
input,textarea{
  width:100%; padding:10px; border-radius:6px; border:1px solid #00eaff; background:black; color:#fff;
}
button{
  padding:8px 14px; background:#00eaff; border:none; cursor:pointer; margin-top:10px; border-radius:5px; font-weight:bold;
}
</style>
</head>
<body>

<div class="container">
<h2>üë®‚Äçüíº Staff Portal</h2>
<button onclick="logout()">Logout</button>

<h3>Add Evidence</h3>
<textarea id="text" placeholder="Add description"></textarea>
<input type="file" id="file">
<button onclick="add()">Submit</button>

<h3>Your Recorded Blockchain</h3>
<div id="chain"></div>

</div>

<script>
const API="https://block-chain-0xps.onrender.com";
const token=localStorage.getItem("token");

if(!token) location.href="login.html";

async function add(){
  const fd=new FormData();
  fd.append("text",document.getElementById("text").value);
  let f=document.getElementById("file").files[0];
  if(f) fd.append("image",f);

  await fetch(API+"/addBlock",{method:"POST",headers:{Authorization:token},body:fd});
  load();
}

async function load(){
  const res=await fetch(API+"/chain/staff",{headers:{Authorization:token}});
  const data=await res.json();
  const box=document.getElementById("chain");
  box.innerHTML="";

  data.forEach(b=>{
    box.innerHTML += `
    <div class="block">
    <p><b>Block #${b.index}</b></p>
    <p>${b.text}</p>
    <p>Status: ${b.status}</p>
    </div>
    `;
  });
}

function logout(){
  localStorage.clear();
  location.href="login.html";
}

load();
</script>
</body>
</html>
